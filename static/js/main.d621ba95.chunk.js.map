{"version":3,"sources":["store/reducers/rootReducer.js","store/store.js","utils/firebase.js","utils/auth.js","store/actions/actions.js","UserProfile.js","ProtectedRoute.js","Message.js","AddMessage.js","Preloader.js","Chat.js","SignUp.js","SignIn.js","Home.js","images/send.png","Header.js","ErrorPopup.js","App.js","index.js"],"names":["rootReducer","state","action","type","user","payload","authenticated","app","isLoading","error","store","createStore","name","id","avatar","compose","applyMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","database","auth","getUserInfo","currentUser","userData","providerData","forEach","profile","userId","uid","displayName","email","photoURL","Error","userSignIn","userSignOut","signOut","showError","message","UserProfile","props","useSelector","dispatch","useDispatch","React","useEffect","a","className","style","backgroundImage","onClick","ProtectedRoute","component","children","to","Message","dateFormate","Date","timestamp","toTimeString","split","ref","this","messageKey","remove","setState","isYourMessage","deleteMessage","Component","AddMessage","sendMessage","e","preventDefault","inputMessage","length","push","now","errorMessage","target","querySelector","blur","errorMessageHandler","inputChangeHandler","value","onSubmit","onChange","onFocus","placeholder","connect","Preloader","Chat","chats","msgAdded","setIsLoading","on","snapshot","elem","val","key","scrollTo","top","document","body","scrollHeight","left","behavior","map","mapDispatchToProps","status","SignUp","password","createUserWithEmailAndPassword","updateProfile","history","handleSubmit","autoComplete","handleInputChange","withRouter","SignIn","signInWithEmailAndPassword","Home","Header","src","logo","alt","ErrorPopup","App","exact","path","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d621ba95.chunk.js","sourcesContent":["\r\nfunction rootReducer(state, action) {\r\n    switch(action.type) {\r\n        case 'USER_SIGN_IN': return { ...state,  user: {...action.payload, authenticated: true}};\r\n        case 'USER_SIGN_OUT': return {...state, user: {...state.user, authenticated: false}};\r\n        case 'IS_LOADING': return {...state, app: {...state.app, isLoading: action.payload}};\r\n        case 'SHOW_ERROR': return {...state, app: {...state.app, error: action.payload}}\r\n        case 'HIDE_ERROR': return {...state, app: {...state.app, error: false}}\r\n        default: return state;\r\n    }\r\n}\r\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/rootReducer';\r\n\r\nconst initialState = {\r\n    user: {\r\n        name: '',\r\n        id: '',\r\n        avatar: '',\r\n        authenticated: false,\r\n    },\r\n    app: {\r\n        isLoading: false,\r\n        error: null\r\n    },\r\n};\r\n\r\nconst store = createStore(rootReducer, initialState, compose(applyMiddleware(thunk), window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()));\r\n//const store = createStore(rootReducer, initialState, compose(applyMiddleware(thunk)));\r\nexport default store;","import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAIaVNyHJGV-vngdDs8r2BAxnsWE2CTswc\",\r\n    authDomain: \"my-chat-9290d.firebaseapp.com\",\r\n    projectId: \"my-chat-9290d\",\r\n    storageBucket: \"my-chat-9290d.appspot.com\",\r\n    messagingSenderId: \"159023475897\",\r\n    appId: \"1:159023475897:web:b215b7d2a44c5a45d13f68\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n  export const db = firebase.database();\r\n  export const auth = firebase.auth;","import {auth} from './firebase';\r\n\r\nexport function signup(email, password) {\r\n    return auth().createUserWithEmailAndPassword(email, password);\r\n}\r\n  \r\nexport  function signin(email, password) {\r\n    return  auth().signInWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function updateUser(name, avatar) {\r\n    return auth().currentUser.updateProfile({\r\n        displayName: name,\r\n        photoURL: avatar\r\n    })\r\n}\r\n\r\nexport function signOut() {\r\n    auth().signOut();\r\n}\r\n\r\nexport function getUserInfo() {\r\n    try{\r\n        let user = auth().currentUser;\r\n        let userData = {};\r\n        if(user) {\r\n            user.providerData.forEach(function (profile) {\r\n                userData = {\r\n                    userId: profile.uid,\r\n                    name: profile.displayName,\r\n                    email: profile.email,\r\n                    avatar: profile.photoURL\r\n                }    \r\n            });\r\n        \r\n            return userData;\r\n        }\r\n\r\n    } catch(error) {\r\n        throw new Error('error getting user info');\r\n    }\r\n    \r\n    \r\n}\r\n","import { getUserInfo } from '../../utils/auth';\r\nimport { signOut } from '../../utils/auth';\r\n\r\nexport function userSignIn(user) {\r\n    return {\r\n        type: 'USER_SIGN_IN',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport function userSignOut() {\r\n    signOut();\r\n    return {\r\n        type: 'USER_SIGN_OUT'\r\n    }\r\n}\r\n\r\nexport function getSetUserData() {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await getUserInfo();\r\n            if(user)  {\r\n                dispatch(userSignIn(user));\r\n            } \r\n        } catch(error) {\r\n            dispatch(showError(error));\r\n        }\r\n    }    \r\n}\r\n\r\nexport function setIsLoading(status) {\r\n    return {\r\n        type: 'IS_LOADING',\r\n        payload: status,\r\n    }\r\n}\r\n\r\nexport function showError(error) {\r\n    return {\r\n        type: 'SHOW_ERROR',\r\n        payload: error.message,\r\n    }\r\n}\r\n\r\nexport function hideError() {\r\n    return {\r\n        type: 'HIDE_ERROR',\r\n    }\r\n}","import React from 'react';\r\nimport './UserProfile.css';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {  userSignOut } from './store/actions/actions';\r\nimport { getSetUserData } from './store/actions/actions';\r\n\r\nexport default function UserProfile (props) {\r\n\r\n    const user = useSelector((state) => state.user)\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    React.useEffect(() => {\r\n        dispatch(getSetUserData());\r\n    }, [user.authenticated, dispatch]);\r\n    \r\n    return (\r\n        <>\r\n            {user.authenticated  ? \r\n                <div className=\"user-info\">\r\n                    <h3 className=\"user-info__name\">{user.name}\r\n                        <span className=\"user-info__email\">{user.email}</span>\r\n                    </h3>\r\n                    <div className=\"user-info__border\">\r\n                        <div className=\"user-info__avatar\" style={{backgroundImage: `url(${user.avatar})`}} ></div>\r\n                    </div>\r\n                    <button className=\"user-info__button\" onClick={() => dispatch(userSignOut())}>Sign out</button>\r\n                </div>  \r\n            :\r\n            ''\r\n            }     \r\n        </>\r\n    );\r\n\r\n}\r\n\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\n\r\nexport default  function ProtectedRoute ({ component: Component, ...props })  {\r\n\r\n    const authenticated = useSelector((state) => state.user.authenticated);\r\n    \r\n    return (\r\n        <Route>\r\n        {\r\n        () => authenticated === true \r\n            ? props.children\r\n            : <Redirect  to=\"/signin\"/>\r\n        }\r\n        </Route>\r\n    );\r\n}\r\n","import {React, Component} from 'react';\r\nimport {db} from './utils/firebase';\r\nimport './Message.css';\r\n\r\nexport default class Message extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    async deleteMessage() {\r\n        try {\r\n            db.ref('chats/' + this.props.messageKey).remove();\r\n        }\r\n        catch (error) {\r\n            this.setState({error})\r\n        }\r\n    }\r\n\r\n    dateFormate = () => {\r\n        const date = new Date(this.props.timestamp);\r\n        return date.toTimeString().split(' ')[0];\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"chat-message\">\r\n                <div className={\r\n                    this.props.isYourMessage ? \r\n                     \"chat-user_your-message\" :\r\n                     \"chat-user\"\r\n                }>\r\n                    <div className=\"chat-user__avatar\" style={{backgroundImage: `url(${this.props.avatar})`}}></div>\r\n                    <p className=\"chat-user__name\">{this.props.name}</p>\r\n                    <p className=\"chat-message__time\">{this.dateFormate()}</p>\r\n                </div>\r\n                <p className={\r\n                    this.props.isYourMessage ?\r\n                     \"chat-message__content chat-message__content_your-message\" :\r\n                     \"chat-message__content\"}\r\n                >{this.props.message}</p>\r\n                {this.props.isYourMessage ? \r\n                    <button className=\"chat-message__button-delete\" onClick={() => this.deleteMessage()}></button>\r\n                    :\r\n                    ''\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n}","import {React, Component} from 'react';\r\nimport {db} from './utils/firebase';\r\nimport { connect } from 'react-redux';\r\nimport './AddMessage.css';\r\n\r\n class AddMessage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            inputMessage: '',\r\n            errorMessage: null,\r\n            showError: false,\r\n        }\r\n    }\r\n\r\n    sendMessage = (e) => {\r\n        e.preventDefault();\r\n        if(this.state.inputMessage.length > 0 && this.state.inputMessage.length < 60){\r\n            try{\r\n                db.ref('chats').push({\r\n                    avatar: this.props.user.avatar,\r\n                    message: this.state.inputMessage,\r\n                    name: this.props.user.name,\r\n                    timestamp: Date.now(),\r\n                    userId: this.props.user.userId\r\n                });\r\n                this.setState({...this.state, inputMessage: ''});\r\n            } catch(error) {\r\n                this.setState({...this.state, errorMessage: error, inputMessage: '', showError: true})\r\n            }\r\n            \r\n        } else {\r\n            e.target.querySelector('input').blur()\r\n            if(this.state.inputMessage.length === 0)\r\n                this.setState({...this.state, errorMessage: 'Сообщение не должно быть пустым', showError: true});\r\n            if(this.state.inputMessage.length > 60)\r\n                this.setState({...this.state, errorMessage: 'Сообщение не должно содержать более 60 символов', inputMessage: '', showError: true})\r\n            \r\n        }\r\n        \r\n    }\r\n\r\n    errorMessageHandler = (e) => {\r\n        this.setState({...this.state, showError: false});\r\n    }\r\n\r\n    inputChangeHandler = (e) => {\r\n        this.setState({...this.state, inputMessage: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"add-message\">\r\n                <form className=\"form-add-message\" onSubmit={(e) => this.sendMessage(e)}>\r\n                    <input className=\"form-add-message__input\" value={this.state.inputMessage}\r\n                    onChange={(e) => this.inputChangeHandler(e)} onFocus={(e) => this.errorMessageHandler(e)} placeholder=\"введите сообщение...\"/>\r\n                    <button className=\"form-add-message__button\"  type=\"submit\"></button>\r\n                    {this.state.showError ? \r\n                        <span className=\"form-add-message__error\">{this.state.errorMessage}</span> \r\n                        :\r\n                        ''\r\n                    }\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      user: state.user\r\n    }\r\n};\r\n  \r\nexport default connect(mapStateToProps, null)(AddMessage);","import React from 'react';\r\nimport './Preloader.css';\r\n\r\nfunction Preloader() {\r\n    return (\r\n        <section className=\"preloader\">\r\n            <i className=\"circle-preloader\"></i>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Preloader;","import {React, Component}  from 'react';\r\nimport Message from './Message';\r\nimport AddMessage from './AddMessage';\r\nimport { connect } from 'react-redux'\r\nimport {db} from './utils/firebase';\r\nimport { setIsLoading, showError } from './store/actions/actions';\r\nimport './Chat.css';\r\nimport Preloader from './Preloader';\r\n\r\nclass Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chats: [],\r\n            msgAdded: true,\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.props.setIsLoading(true);\r\n        try {\r\n            db.ref('chats').on('value', snapshot => {\r\n                let chats = [];\r\n                snapshot.forEach(elem => {\r\n                    chats.push({...elem.val(), key: elem.key})\r\n                });\r\n                this.setState({...this.state, msgAdded: chats.length > this.state.chats.length})//delete or add message(affects on scroll)\r\n                this.setState({ chats });\r\n                this.props.setIsLoading(false)\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.props.showError(error);\r\n            this.props.setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if(this.state.msgAdded) {\r\n            window.scrollTo({\r\n                top: document.body.scrollHeight,\r\n                left: 0,\r\n                behavior: 'smooth'\r\n              });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"chat\">\r\n                    {this.props.isLoading ?\r\n                        <Preloader/>\r\n                        :\r\n                        <>\r\n                        {this.state.chats.map( message => \r\n                            <Message \r\n                                avatar={message.avatar}\r\n                                name={message.name}\r\n                                message={message.message}\r\n                                timestamp={message.timestamp}\r\n                                key={message.key}\r\n                                messageKey={message.key}\r\n                                isYourMessage={message.userId === this.props.userId}\r\n                            />\r\n                        )}\r\n                        <AddMessage/>\r\n                        </>\r\n                    }\r\n                    \r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.user.userId,\r\n        isLoading: state.app.isLoading,\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    setIsLoading,\r\n    showError\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);","import {React, Component} from 'react';\r\nimport {Link, withRouter} from 'react-router-dom';\r\nimport {signup, updateUser} from './utils/auth';\r\nimport './SignUp.css'\r\n\r\nclass SignUp extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            name: '',\r\n            avatar: '',\r\n            error: null\r\n        }\r\n    }\r\n\r\n    handleInputChange(e) {\r\n        this.setState({[e.target.name]: e.target.value});\r\n    };\r\n\r\n    async handleSubmit(e) {\r\n        e.preventDefault();\r\n        try {\r\n            await signup(this.state.email, this.state.password);\r\n            await updateUser(this.state.name, this.state.avatar);\r\n            this.props.history.push('/signin');\r\n        } catch(error) {\r\n            this.setState({error: error.message});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"center-element\">\r\n                <form className=\"sign-up\" onSubmit={(e) => this.handleSubmit(e)} autoComplete=\"off\">\r\n                    <h1>Sign Up</h1>\r\n                    <div>\r\n                        <input placeholder=\"Email\" name=\"email\" type=\"email\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.email}/>\r\n                    </div>\r\n                    <div>\r\n                        <input placeholder=\"Password\" name=\"password\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.password}\r\n                        type=\"password\"/>\r\n                    </div>\r\n                    <div>\r\n                        <input placeholder=\"Name\" name=\"name\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.name}\r\n                        type=\"text\"/>\r\n                    </div>\r\n                    <div>\r\n                        <input placeholder=\"Avatar URL\" name=\"avatar\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.avatar}\r\n                        type=\"url\"/>\r\n                    </div>\r\n                    {this.state.error ? <p className=\"sign-up__error\">{this.state.error}</p> : null}\r\n                    <button type=\"submit\" className=\"sign-up__button\">Sign up</button>\r\n                    <Link to='/signin' className=\"home__link\">log in</Link>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SignUp);","import {React, Component} from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport {Link} from 'react-router-dom'\r\nimport { signin } from './utils/auth';\r\nimport { connect } from 'react-redux'\r\nimport { userSignIn } from './store/actions/actions';\r\nimport './SignIn.css';\r\n\r\nclass SignIn extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            error: null\r\n        }\r\n    }\r\n\r\n    handleInputChange(e) {\r\n\r\n        this.setState({[e.target.name]: e.target.value});\r\n\r\n    };\r\n\r\n    async handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n        try{\r\n            const user = await signin(this.state.email, this.state.password);\r\n            this.props.userSignIn(user);\r\n            this.props.history.push('/chat');\r\n        } catch(error) {\r\n            this.setState({error: error.message});\r\n        }\r\n        \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"center-element\">\r\n                <form className=\"sign-in\" onSubmit={(e) => this.handleSubmit(e)} autoComplete=\"off\">\r\n                    <h1>Sign in</h1>\r\n                    <div>\r\n                        <input placeholder=\"Email\" name=\"email\" type=\"email\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.email}/>\r\n                    </div>\r\n                    <div>\r\n                        <input placeholder=\"Password\" name=\"password\"\r\n                        onChange={(e) => this.handleInputChange(e)} value={this.state.password}\r\n                        type=\"password\"/>\r\n                    </div>\r\n                    {this.state.error ? <p className=\"sign-in__error\">{this.state.error}</p> : null}\r\n                    <button type=\"submit\" className=\"sign-in__button\">Sign in</button>\r\n                    <Link to='/signup' className=\"home__link\">register</Link>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    userSignIn\r\n}\r\n\r\nexport default withRouter(connect(null,  mapDispatchToProps)(SignIn));","import {React, Component} from 'react';\r\nimport {Link} from 'react-router-dom'\r\nimport './Home.css';\r\n\r\nexport default class Home extends Component {\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"home center-element\">\r\n            <h3 className=\"home__title\">Welcome to My Chat App </h3>\r\n            <p className=\"home__text\">To begin, please, &nbsp; \r\n                <Link to='/signup' className=\"home__link\">register</Link>\r\n            </p>\r\n            <p className=\"home__text\">or&nbsp; \r\n                <Link to='/signin' className=\"home__link\">log in</Link>\r\n                    &nbsp;if you already have an account\r\n            </p>\r\n            </div>\r\n        );\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/send.c86bd309.png\";","import React from 'react';\r\nimport './Header.css';\r\nimport logo from './images/send.png';\r\n\r\nexport default function Header() {\r\n    return (\r\n        <>\r\n        <div className=\"header\">\r\n            <img className=\"header-logo\" src={logo} alt=\"логотип my chat app\"></img>\r\n            <h1 className=\"header-title\">My Chat App</h1>\r\n            \r\n        </div>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { hideError } from './store/actions/actions';\r\nimport './ErrorPopup.css'\r\n\r\nexport default function ErrorPopup(props) {\r\n    const error = useSelector((state) => state.app.error)\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <>\r\n        {error ? \r\n            <div className=\"error-popup__wrapper\">\r\n                <div className=\"error-popup\">\r\n                    <p>An error occured: <br/>{error}</p>\r\n                    <button className=\"error-popup__button-close\" onClick={() => dispatch(hideError())}></button>\r\n                </div>\r\n            </div>\r\n            :\r\n            ''\r\n        }\r\n        </>\r\n    );\r\n}","import {React, Component} from 'react';\nimport UserProfile from './UserProfile';\nimport {\n  Route,\n  BrowserRouter as Router,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport ProtectedRoute from './ProtectedRoute';\nimport Chat from './Chat';\nimport SignUp from './SignUp';\nimport SignIn from './SignIn';\nimport Home from './Home';\nimport Header from './Header';\nimport './fonts/fonts.css';\nimport './App.css';\nimport ErrorPopup from './ErrorPopup';\n\n\nclass App extends Component {\n\n  render() {\n    return (\n      <>\n      <Header/>\n      <ErrorPopup/>\n      <div className=\"wrapper\">\n        <Router>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <ProtectedRoute\n              path=\"/chat\"\n            >\n              <UserProfile/>\n              <Chat/>\n            </ProtectedRoute>\n            <Route exact path=\"/signin\">\n              <SignIn/>\n            </Route>\n            <Route exact path=\"/signup\">\n              <SignUp/>\n            </Route>\n            <Route>\n            {this.props.authenticated ? <Redirect to=\"/chat\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n          </Switch>\n        </Router>\n      </div>\n      </>\n    );\n  }\n  \n}\n\nconst mapStateToProps = state => {\n  return {\n    authenticated: state.user.authenticated,\n    error: state.app.error\n  }\n};\n\nexport default connect(mapStateToProps, null)(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}