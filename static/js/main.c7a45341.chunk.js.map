{"version":3,"sources":["store/reducers/rootReducer.js","store/store.js","utils/firebase.js","utils/auth.js","store/actions/actions.js","UserProfile.js","ProtectedRoute.js","Message.js","AddMessage.js","Preloader.js","Chat.js","SignUp.js","SignIn.js","Home.js","images/send.png","Header.js","ErrorPopup.js","App.js","index.js"],"names":["rootReducer","state","action","type","user","payload","authenticated","app","isLoading","error","store","createStore","name","id","avatar","compose","applyMiddleware","thunk","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","database","auth","getUserInfo","currentUser","userData","providerData","forEach","profile","userId","uid","displayName","email","photoURL","Error","userSignIn","userSignOut","signOut","showError","message","UserProfile","props","useSelector","dispatch","useDispatch","React","useEffect","a","className","style","backgroundImage","onClick","ProtectedRoute","component","children","to","Message","dateFormate","Date","timestamp","toTimeString","split","ref","this","messageKey","remove","setState","isYourMessage","deleteMessage","Component","AddMessage","sendMessage","e","preventDefault","inputMessage","length","push","now","errorMessage","target","querySelector","blur","errorMessageHandler","inputChangeHandler","value","onSubmit","onChange","onFocus","placeholder","connect","Preloader","Chat","chats","msgAdded","setIsLoading","on","snapshot","elem","val","key","window","scrollTo","top","document","body","scrollHeight","left","behavior","map","mapDispatchToProps","status","SignUp","password","createUserWithEmailAndPassword","updateProfile","history","handleSubmit","autoComplete","handleInputChange","withRouter","SignIn","signInWithEmailAndPassword","Home","Header","src","logo","alt","ErrorPopup","App","exact","path","createHashHistory","ReactDOM","render","StrictMode","getElementById"],"mappings":"4dAWeA,MAVf,SAAqBC,EAAOC,GACxB,OAAOA,EAAOC,MACV,IAAK,eAAgB,OAAO,2BAAKF,GAAZ,IAAoBG,KAAK,2BAAKF,EAAOG,SAAb,IAAsBC,eAAe,MAClF,IAAK,gBAAiB,OAAO,2BAAIL,GAAX,IAAkBG,KAAK,2BAAKH,EAAMG,MAAZ,IAAkBE,eAAe,MAC7E,IAAK,aAAc,OAAO,2BAAIL,GAAX,IAAkBM,IAAI,2BAAKN,EAAMM,KAAZ,IAAiBC,UAAWN,EAAOG,YAC3E,IAAK,aAAc,OAAO,2BAAIJ,GAAX,IAAkBM,IAAI,2BAAKN,EAAMM,KAAZ,IAAiBE,MAAOP,EAAOG,YACvE,IAAK,aAAc,OAAO,2BAAIJ,GAAX,IAAkBM,IAAI,2BAAKN,EAAMM,KAAZ,IAAiBE,OAAO,MAChE,QAAS,OAAOR,ICkBTS,EATDC,YACZX,EAdmB,CACnBI,KAAM,CACJQ,KAAM,GACNC,GAAI,GACJC,OAAQ,GACRR,eAAe,GAEjBC,IAAK,CACHC,WAAW,EACXC,MAAO,OAOTM,YACEC,YAAgBC,O,iFCVlBC,IAASC,cATY,CACnBC,OAAQ,0CACRC,WAAY,gCACZC,UAAW,gBACXC,cAAe,4BACfC,kBAAmB,eACnBC,MAAO,8CAIF,IAAMC,EAAKR,IAASS,WACdC,EAAOV,IAASU,KCQxB,SAASC,IACZ,IACI,IAAIzB,EAAOwB,IAAOE,YACdC,EAAW,GACf,GAAG3B,EAUC,OATAA,EAAK4B,aAAaC,SAAQ,SAAUC,GAChCH,EAAW,CACPI,OAAQD,EAAQE,IAChBxB,KAAMsB,EAAQG,YACdC,MAAOJ,EAAQI,MACfxB,OAAQoB,EAAQK,aAIjBR,EAGb,MAAMtB,GACJ,MAAM,IAAI+B,MAAM,4BCpCjB,SAASC,EAAWrC,GACvB,MAAO,CACHD,KAAM,eACNE,QAASD,GAIV,SAASsC,IAEZ,ODMAd,IAAOe,UCNA,CACHxC,KAAM,iBAwBP,SAASyC,EAAUnC,GACtB,MAAO,CACHN,KAAM,aACNE,QAASI,EAAMoC,SClCR,SAASC,EAAaC,GAEjC,IAAM3C,EAAO4C,aAAY,SAAC/C,GAAD,OAAWA,EAAMG,QACpC6C,EAAWC,cAOjB,OAJAC,IAAMC,WAAU,WACZH,EDKJ,uCAAO,WAAMA,GAAN,eAAAI,EAAA,+EAEoBxB,IAFpB,QAEOzB,EAFP,SAIK6C,EAASR,EAAWrC,IAJzB,gDAOC6C,EAASL,EAAU,EAAD,KAPnB,yDAAP,yDCJG,CAACxC,EAAKE,cAAe2C,IAGpB,mCACK7C,EAAKE,cACF,sBAAKgD,UAAU,YAAf,UACI,qBAAIA,UAAU,kBAAd,UAAiClD,EAAKQ,KAClC,sBAAM0C,UAAU,mBAAhB,SAAoClD,EAAKkC,WAE7C,qBAAKgB,UAAU,oBAAf,SACI,qBAAKA,UAAU,oBAAoBC,MAAO,CAACC,gBAAgB,OAAD,OAASpD,EAAKU,OAAd,UAE9D,wBAAQwC,UAAU,oBAAoBG,QAAS,kBAAMR,EAASP,MAA9D,yBAGR,K,YCzBG,SAASgB,EAAT,GAA4D,EAAlCC,UAAmC,IAAVZ,EAAS,6BACnEzC,EAAgB0C,aAAY,SAAC/C,GAAD,OAAWA,EAAMG,KAAKE,iBAExD,OACE,cAAC,IAAD,UACG,kBACmB,IAAlBA,EAAyByC,EAAMa,SAAW,cAAC,IAAD,CAAUC,GAAG,gB,UCN1CC,E,kDAEjB,WAAYf,GAAQ,IAAD,8BACf,cAAMA,IAeVgB,YAAc,WAEV,OADa,IAAIC,KAAK,EAAKjB,MAAMkB,WACrBC,eAAeC,MAAM,KAAK,IAhBtC,EAAKlE,MAAQ,GAFE,E,sKAQf,IACIyB,EAAG0C,IAAI,SAAWC,KAAKtB,MAAMuB,YAAYC,SAE7C,MAAO9D,GACH4D,KAAKG,SAAS,CAAC/D,U,qIASb,IAAD,OACL,OACI,sBAAK6C,UAAU,eAAf,UACI,sBAAKA,UACDe,KAAKtB,MAAM0B,cACV,yBACA,YAHL,UAKI,qBAAKnB,UAAU,oBAAoBC,MAAO,CAACC,gBAAgB,OAAD,OAASa,KAAKtB,MAAMjC,OAApB,QAC1D,mBAAGwC,UAAU,kBAAb,SAAgCe,KAAKtB,MAAMnC,OAC3C,mBAAG0C,UAAU,qBAAb,SAAmCe,KAAKN,mBAE5C,mBAAGT,UACCe,KAAKtB,MAAM0B,cACV,2DACA,wBAHL,SAIEJ,KAAKtB,MAAMF,UACZwB,KAAKtB,MAAM0B,cACR,wBAAQnB,UAAU,8BAA8BG,QAAS,kBAAM,EAAKiB,mBAEpE,U,GA3CiBC,aCC9BC,G,wDAEH,WAAY7B,GAAQ,IAAD,8BACf,cAAMA,IAQV8B,YAAc,SAACC,GAEX,GADAA,EAAEC,iBACC,EAAK9E,MAAM+E,aAAaC,OAAS,GAAK,EAAKhF,MAAM+E,aAAaC,OAAS,GACtE,IACIvD,EAAG0C,IAAI,SAASc,KAAK,CACjBpE,OAAQ,EAAKiC,MAAM3C,KAAKU,OACxB+B,QAAS,EAAK5C,MAAM+E,aACpBpE,KAAM,EAAKmC,MAAM3C,KAAKQ,KACtBqD,UAAWD,KAAKmB,MAChBhD,OAAQ,EAAKY,MAAM3C,KAAK+B,SAE5B,EAAKqC,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8B+E,aAAc,MAC9C,MAAMvE,GACJ,EAAK+D,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8BmF,aAAc3E,EAAOuE,aAAc,GAAIpC,WAAW,UAIpFkC,EAAEO,OAAOC,cAAc,SAASC,OACM,IAAnC,EAAKtF,MAAM+E,aAAaC,QACvB,EAAKT,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8BmF,aAAc,yKAAmCxC,WAAW,KAC3F,EAAK3C,MAAM+E,aAAaC,OAAS,IAChC,EAAKT,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8BmF,aAAc,qPAAmDJ,aAAc,GAAIpC,WAAW,MA9BrH,EAoCnB4C,oBAAsB,SAACV,GACnB,EAAKN,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8B2C,WAAW,MArC1B,EAwCnB6C,mBAAqB,SAACX,GAClB,EAAKN,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8B+E,aAAcF,EAAEO,OAAOK,UAvCrD,EAAKzF,MAAQ,CACT+E,aAAc,GACdI,aAAc,KACdxC,WAAW,GALA,E,qDA4CT,IAAD,OACL,OACI,qBAAKU,UAAU,cAAf,SACI,uBAAMA,UAAU,mBAAmBqC,SAAU,SAACb,GAAD,OAAO,EAAKD,YAAYC,IAArE,UACI,uBAAOxB,UAAU,0BAA0BoC,MAAOrB,KAAKpE,MAAM+E,aAC7DY,SAAU,SAACd,GAAD,OAAO,EAAKW,mBAAmBX,IAAIe,QAAS,SAACf,GAAD,OAAO,EAAKU,oBAAoBV,IAAIgB,YAAY,yGACtG,wBAAQxC,UAAU,2BAA4BnD,KAAK,WAClDkE,KAAKpE,MAAM2C,UACR,sBAAMU,UAAU,0BAAhB,SAA2Ce,KAAKpE,MAAMmF,eAEtD,Y,GAxDET,cAuEXoB,eANS,SAAA9F,GACpB,MAAO,CACLG,KAAMH,EAAMG,QAIsB,KAAzB2F,CAA+BnB,G,YCjE/BoB,MARf,WACI,OACI,yBAAS1C,UAAU,YAAnB,SACI,mBAAGA,UAAU,wBCGnB2C,E,kDACF,WAAYlD,GAAQ,IAAD,8BACf,cAAMA,IACD9C,MAAQ,CACTiG,MAAO,GACPC,UAAU,GAJC,E,qLASf9B,KAAKtB,MAAMqD,cAAa,GACxB,IACI1E,EAAG0C,IAAI,SAASiC,GAAG,SAAS,SAAAC,GACxB,IAAIJ,EAAQ,GACZI,EAASrE,SAAQ,SAAAsE,GACbL,EAAMhB,KAAN,2BAAeqB,EAAKC,OAApB,IAA2BC,IAAKF,EAAKE,UAEzC,EAAKjC,SAAL,2BAAkB,EAAKvE,OAAvB,IAA8BkG,SAAUD,EAAMjB,OAAS,EAAKhF,MAAMiG,MAAMjB,UACxE,EAAKT,SAAS,CAAE0B,UAChB,EAAKnD,MAAMqD,cAAa,MAGhC,MAAO3F,GACH4D,KAAKtB,MAAMH,UAAUnC,GACrB4D,KAAKtB,MAAMqD,cAAa,G,iJAKzB/B,KAAKpE,MAAMkG,UACVO,OAAOC,SAAS,CACZC,IAAKC,SAASC,KAAKC,aACnBC,KAAM,EACNC,SAAU,a,+BAKZ,IAAD,OACL,OACI,mCACI,qBAAK3D,UAAU,OAAf,SACKe,KAAKtB,MAAMvC,UACR,cAAC,EAAD,IAEA,qCACC6D,KAAKpE,MAAMiG,MAAMgB,KAAK,SAAArE,GAAO,OAC1B,cAAC,EAAD,CACI/B,OAAQ+B,EAAQ/B,OAChBF,KAAMiC,EAAQjC,KACdiC,QAASA,EAAQA,QACjBoB,UAAWpB,EAAQoB,UAEnBK,WAAYzB,EAAQ4D,IACpBhC,cAAe5B,EAAQV,SAAW,EAAKY,MAAMZ,QAFxCU,EAAQ4D,QAKrB,cAAC,EAAD,e,GAzDL9B,aAwEbwC,EAAqB,CACvBf,aNpDG,SAAsBgB,GACzB,MAAO,CACHjH,KAAM,aACNE,QAAS+G,IMkDbxE,aAGWmD,eAXS,SAAC9F,GACrB,MAAO,CACHkC,OAAQlC,EAAMG,KAAK+B,OACnB3B,UAAWP,EAAMM,IAAIC,aAQW2G,EAAzBpB,CAA6CE,G,gBCjFtDoB,G,wDACJ,WAAYtE,GAAQ,IAAD,8BACjB,cAAMA,IACD9C,MAAQ,CACXqC,MAAO,GACPgF,SAAU,GACV1G,KAAM,GACNE,OAAQ,GACRL,MAAO,MAPQ,E,8DAWDqE,GAChBT,KAAKG,SAAL,eAAiBM,EAAEO,OAAOzE,KAAOkE,EAAEO,OAAOK,U,4EAGzBZ,G,wEACjBA,EAAEC,iB,kBRpBiBzC,EQsBJ+B,KAAKpE,MAAMqC,MRtBAgF,EQsBOjD,KAAKpE,MAAMqH,SRrBrC1F,IAAO2F,+BAA+BjF,EAAOgF,G,uBAO7B1G,EQeJyD,KAAKpE,MAAMW,KRfDE,EQeOuD,KAAKpE,MAAMa,ORdxCc,IAAOE,YAAY0F,cAAc,CACpCnF,YAAazB,EACb2B,SAAUzB,I,OQaZuD,KAAKtB,MAAM0E,QAAQvC,KAAK,Y,gDAExBb,KAAKG,SAAS,CAAE/D,MAAO,KAAMoC,U,kCRlB5B,IAAoBjC,EAAME,EARVwB,EAAOgF,I,0GQ8BlB,IAAD,OACP,OACE,qBAAKhE,UAAU,iBAAf,SACE,uBACEA,UAAU,UACVqC,SAAU,SAACb,GAAD,OAAO,EAAK4C,aAAa5C,IACnC6C,aAAa,MAHf,UAKE,yCACA,8BACE,uBACE7B,YAAY,QACZlF,KAAK,QACLT,KAAK,QACLyF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMqC,UAGtB,8BACE,uBACEwD,YAAY,WACZlF,KAAK,WACLgF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMqH,SAClBnH,KAAK,eAGT,8BACE,uBACE2F,YAAY,OACZlF,KAAK,OACLgF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMW,KAClBT,KAAK,WAGT,8BACE,uBACE2F,YAAY,aACZlF,KAAK,SACLgF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMa,OAClBX,KAAK,UAGRkE,KAAKpE,MAAMQ,MACV,mBAAG6C,UAAU,iBAAb,SAA+Be,KAAKpE,MAAMQ,QACxC,KACJ,wBAAQN,KAAK,SAASmD,UAAU,kBAAhC,qBAGA,cAAC,IAAD,CAAMO,GAAG,UAAUP,UAAU,aAA7B,6B,GA9EWqB,cAuFNkD,cAAWR,GCpFpBS,G,wDACJ,WAAY/E,GAAQ,IAAD,8BACjB,cAAMA,IACD9C,MAAQ,CACXqC,MAAO,GACPgF,SAAU,GACV7G,MAAO,MALQ,E,8DASDqE,GAChBT,KAAKG,SAAL,eAAiBM,EAAEO,OAAOzE,KAAOkE,EAAEO,OAAOK,U,4EAGzBZ,G,8EACjBA,EAAEC,iB,kBTjBkBzC,ESmBQ+B,KAAKpE,MAAMqC,MTnBZgF,ESmBmBjD,KAAKpE,MAAMqH,STlBjD1F,IAAOmG,2BAA2BzF,EAAOgF,G,OSkBzClH,E,OACNiE,KAAKtB,MAAMN,WAAWrC,GACtBiE,KAAKtB,MAAM0E,QAAQvC,KAAK,U,gDAExBb,KAAKG,SAAS,CAAE/D,MAAO,KAAMoC,U,kCTvB3B,IAAgBP,EAAOgF,I,0GS2BnB,IAAD,OACP,OACE,qBAAKhE,UAAU,iBAAf,SACE,uBACEA,UAAU,UACVqC,SAAU,SAACb,GAAD,OAAO,EAAK4C,aAAa5C,IACnC6C,aAAa,MAHf,UAKE,yCACA,8BACE,uBACE7B,YAAY,QACZlF,KAAK,QACLT,KAAK,QACLyF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMqC,UAGtB,8BACE,uBACEwD,YAAY,WACZlF,KAAK,WACLgF,SAAU,SAACd,GAAD,OAAO,EAAK8C,kBAAkB9C,IACxCY,MAAOrB,KAAKpE,MAAMqH,SAClBnH,KAAK,eAGRkE,KAAKpE,MAAMQ,MACV,mBAAG6C,UAAU,iBAAb,SAA+Be,KAAKpE,MAAMQ,QACxC,KACJ,wBAAQN,KAAK,SAASmD,UAAU,kBAAhC,qBAGA,cAAC,IAAD,CAAMO,GAAG,UAAUP,UAAU,aAA7B,+B,GA1DWqB,cAkEfwC,EAAqB,CACzB1E,cAGaoF,cAAW9B,YAAQ,KAAMoB,EAAdpB,CAAkC+B,IC1EvCE,G,6KAEjB,OACE,sBAAK1E,UAAU,sBAAf,UACE,oBAAIA,UAAU,cAAd,qCACA,oBAAGA,UAAU,aAAb,mCAEE,cAAC,IAAD,CAASO,GAAG,UAAUP,UAAU,aAAhC,yBAIF,oBAAGA,UAAU,aAAb,mBAEE,cAAC,IAAD,CAASO,GAAG,UAAUP,UAAU,aAAhC,oBAFF,+C,GAX0BqB,cCJnB,G,MAAA,IAA0B,kCCI1B,SAASsD,IACpB,OACI,mCACA,sBAAK3E,UAAU,SAAf,UACI,qBAAKA,UAAU,cAAc4E,IAAKC,EAAMC,IAAI,2DAC5C,oBAAI9E,UAAU,eAAd,8B,kBCJG,SAAS+E,EAAWtF,GAC/B,IAAMtC,EAAQuC,aAAY,SAAC/C,GAAD,OAAWA,EAAMM,IAAIE,SACzCwC,EAAWC,cAEjB,OACI,mCACCzC,EACG,qBAAK6C,UAAU,uBAAf,SACI,sBAAKA,UAAU,cAAf,UACI,mDAAqB,uBAAM7C,KAC3B,wBAAQ6C,UAAU,4BAA4BG,QAAS,kBAAMR,EZ8BtE,CACH9C,KAAM,uBY3BF,K,ICANmI,E,uKAEF,OACE,qCACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,qBAAKhF,UAAU,UAAf,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOiF,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,MAEF,eAAC9E,EAAD,CAAgB8E,KAAK,QAArB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,OAEF,cAAC,IAAD,CAAOA,KAAK,UAAZ,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,UAAZ,SACE,cAAC,EAAD,kB,GAnBI7D,aAmCHoB,eAPS,SAAC9F,GACvB,MAAO,CACLK,cAAeL,EAAMG,KAAKE,cAC1BG,MAAOR,EAAMM,IAAIE,SAImB,KAAzBsF,CAA+BuC,G,QC7CxCb,EAAUgB,cAEhBC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUlI,MAAOA,EAAjB,SACE,cAAC,IAAD,CAAQ+G,QAASA,EAAjB,SACE,cAAC,EAAD,UAINZ,SAASgC,eAAe,W","file":"static/js/main.c7a45341.chunk.js","sourcesContent":["\r\nfunction rootReducer(state, action) {\r\n    switch(action.type) {\r\n        case 'USER_SIGN_IN': return { ...state,  user: {...action.payload, authenticated: true}};\r\n        case 'USER_SIGN_OUT': return {...state, user: {...state.user, authenticated: false}};\r\n        case 'IS_LOADING': return {...state, app: {...state.app, isLoading: action.payload}};\r\n        case 'SHOW_ERROR': return {...state, app: {...state.app, error: action.payload}}\r\n        case 'HIDE_ERROR': return {...state, app: {...state.app, error: false}}\r\n        default: return state;\r\n    }\r\n}\r\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers/rootReducer\";\r\n\r\nconst initialState = {\r\n  user: {\r\n    name: \"\",\r\n    id: \"\",\r\n    avatar: \"\",\r\n    authenticated: false,\r\n  },\r\n  app: {\r\n    isLoading: false,\r\n    error: null,\r\n  },\r\n};\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  compose(\r\n    applyMiddleware(thunk)\r\n    //window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n  )\r\n);\r\n//const store = createStore(rootReducer, initialState, compose(applyMiddleware(thunk)));\r\nexport default store;\r\n","import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAIaVNyHJGV-vngdDs8r2BAxnsWE2CTswc\",\r\n    authDomain: \"my-chat-9290d.firebaseapp.com\",\r\n    projectId: \"my-chat-9290d\",\r\n    storageBucket: \"my-chat-9290d.appspot.com\",\r\n    messagingSenderId: \"159023475897\",\r\n    appId: \"1:159023475897:web:b215b7d2a44c5a45d13f68\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n  export const db = firebase.database();\r\n  export const auth = firebase.auth;","import {auth} from './firebase';\r\n\r\nexport function signup(email, password) {\r\n    return auth().createUserWithEmailAndPassword(email, password);\r\n}\r\n  \r\nexport  function signin(email, password) {\r\n    return  auth().signInWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function updateUser(name, avatar) {\r\n    return auth().currentUser.updateProfile({\r\n        displayName: name,\r\n        photoURL: avatar\r\n    })\r\n}\r\n\r\nexport function signOut() {\r\n    auth().signOut();\r\n}\r\n\r\nexport function getUserInfo() {\r\n    try{\r\n        let user = auth().currentUser;\r\n        let userData = {};\r\n        if(user) {\r\n            user.providerData.forEach(function (profile) {\r\n                userData = {\r\n                    userId: profile.uid,\r\n                    name: profile.displayName,\r\n                    email: profile.email,\r\n                    avatar: profile.photoURL\r\n                }    \r\n            });\r\n        \r\n            return userData;\r\n        }\r\n\r\n    } catch(error) {\r\n        throw new Error('error getting user info');\r\n    }\r\n    \r\n    \r\n}\r\n","import { getUserInfo } from '../../utils/auth';\r\nimport { signOut } from '../../utils/auth';\r\n\r\nexport function userSignIn(user) {\r\n    return {\r\n        type: 'USER_SIGN_IN',\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport function userSignOut() {\r\n    signOut();\r\n    return {\r\n        type: 'USER_SIGN_OUT'\r\n    }\r\n}\r\n\r\nexport function getSetUserData() {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await getUserInfo();\r\n            if(user)  {\r\n                dispatch(userSignIn(user));\r\n            } \r\n        } catch(error) {\r\n            dispatch(showError(error));\r\n        }\r\n    }    \r\n}\r\n\r\nexport function setIsLoading(status) {\r\n    return {\r\n        type: 'IS_LOADING',\r\n        payload: status,\r\n    }\r\n}\r\n\r\nexport function showError(error) {\r\n    return {\r\n        type: 'SHOW_ERROR',\r\n        payload: error.message,\r\n    }\r\n}\r\n\r\nexport function hideError() {\r\n    return {\r\n        type: 'HIDE_ERROR',\r\n    }\r\n}","import React from 'react';\r\nimport './UserProfile.css';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {  userSignOut } from './store/actions/actions';\r\nimport { getSetUserData } from './store/actions/actions';\r\n\r\nexport default function UserProfile (props) {\r\n\r\n    const user = useSelector((state) => state.user)\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    React.useEffect(() => {\r\n        dispatch(getSetUserData());\r\n    }, [user.authenticated, dispatch]);\r\n    \r\n    return (\r\n        <>\r\n            {user.authenticated  ? \r\n                <div className=\"user-info\">\r\n                    <h3 className=\"user-info__name\">{user.name}\r\n                        <span className=\"user-info__email\">{user.email}</span>\r\n                    </h3>\r\n                    <div className=\"user-info__border\">\r\n                        <div className=\"user-info__avatar\" style={{backgroundImage: `url(${user.avatar})`}} ></div>\r\n                    </div>\r\n                    <button className=\"user-info__button\" onClick={() => dispatch(userSignOut())}>Sign out</button>\r\n                </div>  \r\n            :\r\n            ''\r\n            }     \r\n        </>\r\n    );\r\n\r\n}\r\n\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nexport default function ProtectedRoute({ component: Component, ...props }) {\r\n  const authenticated = useSelector((state) => state.user.authenticated);\r\n\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        authenticated === true ? props.children : <Redirect to=\"./signin\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n","import {React, Component} from 'react';\r\nimport {db} from './utils/firebase';\r\nimport './Message.css';\r\n\r\nexport default class Message extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    async deleteMessage() {\r\n        try {\r\n            db.ref('chats/' + this.props.messageKey).remove();\r\n        }\r\n        catch (error) {\r\n            this.setState({error})\r\n        }\r\n    }\r\n\r\n    dateFormate = () => {\r\n        const date = new Date(this.props.timestamp);\r\n        return date.toTimeString().split(' ')[0];\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"chat-message\">\r\n                <div className={\r\n                    this.props.isYourMessage ? \r\n                     \"chat-user_your-message\" :\r\n                     \"chat-user\"\r\n                }>\r\n                    <div className=\"chat-user__avatar\" style={{backgroundImage: `url(${this.props.avatar})`}}></div>\r\n                    <p className=\"chat-user__name\">{this.props.name}</p>\r\n                    <p className=\"chat-message__time\">{this.dateFormate()}</p>\r\n                </div>\r\n                <p className={\r\n                    this.props.isYourMessage ?\r\n                     \"chat-message__content chat-message__content_your-message\" :\r\n                     \"chat-message__content\"}\r\n                >{this.props.message}</p>\r\n                {this.props.isYourMessage ? \r\n                    <button className=\"chat-message__button-delete\" onClick={() => this.deleteMessage()}></button>\r\n                    :\r\n                    ''\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n}","import {React, Component} from 'react';\r\nimport {db} from './utils/firebase';\r\nimport { connect } from 'react-redux';\r\nimport './AddMessage.css';\r\n\r\n class AddMessage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            inputMessage: '',\r\n            errorMessage: null,\r\n            showError: false,\r\n        }\r\n    }\r\n\r\n    sendMessage = (e) => {\r\n        e.preventDefault();\r\n        if(this.state.inputMessage.length > 0 && this.state.inputMessage.length < 60){\r\n            try{\r\n                db.ref('chats').push({\r\n                    avatar: this.props.user.avatar,\r\n                    message: this.state.inputMessage,\r\n                    name: this.props.user.name,\r\n                    timestamp: Date.now(),\r\n                    userId: this.props.user.userId\r\n                });\r\n                this.setState({...this.state, inputMessage: ''});\r\n            } catch(error) {\r\n                this.setState({...this.state, errorMessage: error, inputMessage: '', showError: true})\r\n            }\r\n            \r\n        } else {\r\n            e.target.querySelector('input').blur()\r\n            if(this.state.inputMessage.length === 0)\r\n                this.setState({...this.state, errorMessage: 'Сообщение не должно быть пустым', showError: true});\r\n            if(this.state.inputMessage.length > 60)\r\n                this.setState({...this.state, errorMessage: 'Сообщение не должно содержать более 60 символов', inputMessage: '', showError: true})\r\n            \r\n        }\r\n        \r\n    }\r\n\r\n    errorMessageHandler = (e) => {\r\n        this.setState({...this.state, showError: false});\r\n    }\r\n\r\n    inputChangeHandler = (e) => {\r\n        this.setState({...this.state, inputMessage: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"add-message\">\r\n                <form className=\"form-add-message\" onSubmit={(e) => this.sendMessage(e)}>\r\n                    <input className=\"form-add-message__input\" value={this.state.inputMessage}\r\n                    onChange={(e) => this.inputChangeHandler(e)} onFocus={(e) => this.errorMessageHandler(e)} placeholder=\"введите сообщение...\"/>\r\n                    <button className=\"form-add-message__button\"  type=\"submit\"></button>\r\n                    {this.state.showError ? \r\n                        <span className=\"form-add-message__error\">{this.state.errorMessage}</span> \r\n                        :\r\n                        ''\r\n                    }\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      user: state.user\r\n    }\r\n};\r\n  \r\nexport default connect(mapStateToProps, null)(AddMessage);","import React from 'react';\r\nimport './Preloader.css';\r\n\r\nfunction Preloader() {\r\n    return (\r\n        <section className=\"preloader\">\r\n            <i className=\"circle-preloader\"></i>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Preloader;","import {React, Component}  from 'react';\r\nimport Message from './Message';\r\nimport AddMessage from './AddMessage';\r\nimport { connect } from 'react-redux'\r\nimport {db} from './utils/firebase';\r\nimport { setIsLoading, showError } from './store/actions/actions';\r\nimport './Chat.css';\r\nimport Preloader from './Preloader';\r\n\r\nclass Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chats: [],\r\n            msgAdded: true,\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.props.setIsLoading(true);\r\n        try {\r\n            db.ref('chats').on('value', snapshot => {\r\n                let chats = [];\r\n                snapshot.forEach(elem => {\r\n                    chats.push({...elem.val(), key: elem.key})\r\n                });\r\n                this.setState({...this.state, msgAdded: chats.length > this.state.chats.length})//delete or add message(affects on scroll)\r\n                this.setState({ chats });\r\n                this.props.setIsLoading(false)\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.props.showError(error);\r\n            this.props.setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if(this.state.msgAdded) {\r\n            window.scrollTo({\r\n                top: document.body.scrollHeight,\r\n                left: 0,\r\n                behavior: 'smooth'\r\n              });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"chat\">\r\n                    {this.props.isLoading ?\r\n                        <Preloader/>\r\n                        :\r\n                        <>\r\n                        {this.state.chats.map( message => \r\n                            <Message \r\n                                avatar={message.avatar}\r\n                                name={message.name}\r\n                                message={message.message}\r\n                                timestamp={message.timestamp}\r\n                                key={message.key}\r\n                                messageKey={message.key}\r\n                                isYourMessage={message.userId === this.props.userId}\r\n                            />\r\n                        )}\r\n                        <AddMessage/>\r\n                        </>\r\n                    }\r\n                    \r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.user.userId,\r\n        isLoading: state.app.isLoading,\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    setIsLoading,\r\n    showError\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);","import { React, Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signup, updateUser } from \"./utils/auth\";\r\nimport \"./SignUp.css\";\r\n\r\nclass SignUp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      name: \"\",\r\n      avatar: \"\",\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  handleInputChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  async handleSubmit(e) {\r\n    e.preventDefault();\r\n    try {\r\n      await signup(this.state.email, this.state.password);\r\n      await updateUser(this.state.name, this.state.avatar);\r\n      this.props.history.push(\"./signin\");\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"center-element\">\r\n        <form\r\n          className=\"sign-up\"\r\n          onSubmit={(e) => this.handleSubmit(e)}\r\n          autoComplete=\"off\"\r\n        >\r\n          <h1>Sign Up</h1>\r\n          <div>\r\n            <input\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.email}\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.password}\r\n              type=\"password\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Name\"\r\n              name=\"name\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.name}\r\n              type=\"text\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Avatar URL\"\r\n              name=\"avatar\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.avatar}\r\n              type=\"url\"\r\n            />\r\n          </div>\r\n          {this.state.error ? (\r\n            <p className=\"sign-up__error\">{this.state.error}</p>\r\n          ) : null}\r\n          <button type=\"submit\" className=\"sign-up__button\">\r\n            Sign up\r\n          </button>\r\n          <Link to=\"/signin\" className=\"home__link\">\r\n            log in\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(SignUp);\r\n","import { React, Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signin } from \"./utils/auth\";\r\nimport { connect } from \"react-redux\";\r\nimport { userSignIn } from \"./store/actions/actions\";\r\nimport \"./SignIn.css\";\r\n\r\nclass SignIn extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  handleInputChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  async handleSubmit(e) {\r\n    e.preventDefault();\r\n    try {\r\n      const user = await signin(this.state.email, this.state.password);\r\n      this.props.userSignIn(user);\r\n      this.props.history.push(\"./chat\");\r\n    } catch (error) {\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"center-element\">\r\n        <form\r\n          className=\"sign-in\"\r\n          onSubmit={(e) => this.handleSubmit(e)}\r\n          autoComplete=\"off\"\r\n        >\r\n          <h1>Sign in</h1>\r\n          <div>\r\n            <input\r\n              placeholder=\"Email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.email}\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              onChange={(e) => this.handleInputChange(e)}\r\n              value={this.state.password}\r\n              type=\"password\"\r\n            />\r\n          </div>\r\n          {this.state.error ? (\r\n            <p className=\"sign-in__error\">{this.state.error}</p>\r\n          ) : null}\r\n          <button type=\"submit\" className=\"sign-in__button\">\r\n            Sign in\r\n          </button>\r\n          <Link to=\"/signup\" className=\"home__link\">\r\n            register\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  userSignIn,\r\n};\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(SignIn));\r\n","import { React, Component } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport \"./Home.css\";\r\n\r\nexport default class Home extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"home center-element\">\r\n        <h3 className=\"home__title\">Welcome to My Chat App </h3>\r\n        <p className=\"home__text\">\r\n          To begin, please, &nbsp;\r\n          <NavLink to=\"/signup\" className=\"home__link\">\r\n            register\r\n          </NavLink>\r\n        </p>\r\n        <p className=\"home__text\">\r\n          or&nbsp;\r\n          <NavLink to=\"/signin\" className=\"home__link\">\r\n            log in\r\n          </NavLink>\r\n          &nbsp;if you already have an account\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/send.c86bd309.png\";","import React from 'react';\r\nimport './Header.css';\r\nimport logo from './images/send.png';\r\n\r\nexport default function Header() {\r\n    return (\r\n        <>\r\n        <div className=\"header\">\r\n            <img className=\"header-logo\" src={logo} alt=\"логотип my chat app\"></img>\r\n            <h1 className=\"header-title\">My Chat App</h1>\r\n            \r\n        </div>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { hideError } from './store/actions/actions';\r\nimport './ErrorPopup.css'\r\n\r\nexport default function ErrorPopup(props) {\r\n    const error = useSelector((state) => state.app.error)\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <>\r\n        {error ? \r\n            <div className=\"error-popup__wrapper\">\r\n                <div className=\"error-popup\">\r\n                    <p>An error occured: <br/>{error}</p>\r\n                    <button className=\"error-popup__button-close\" onClick={() => dispatch(hideError())}></button>\r\n                </div>\r\n            </div>\r\n            :\r\n            ''\r\n        }\r\n        </>\r\n    );\r\n}","import { React, Component } from \"react\";\nimport UserProfile from \"./UserProfile\";\nimport {\n  Route,\n  BrowserRouter as Router,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Chat from \"./Chat\";\nimport SignUp from \"./SignUp\";\nimport SignIn from \"./SignIn\";\nimport Home from \"./Home\";\nimport Header from \"./Header\";\nimport \"./fonts/fonts.css\";\nimport \"./App.css\";\nimport ErrorPopup from \"./ErrorPopup\";\n\nclass App extends Component {\n  render() {\n    return (\n      <>\n        <Header />\n        <ErrorPopup />\n        <div className=\"wrapper\">\n          <Switch>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <ProtectedRoute path=\"/chat\">\n              <UserProfile />\n              <Chat />\n            </ProtectedRoute>\n            <Route path=\"/signin\">\n              <SignIn />\n            </Route>\n            <Route path=\"/signup\">\n              <SignUp />\n            </Route>\n          </Switch>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    authenticated: state.user.authenticated,\n    error: state.app.error,\n  };\n};\n\nexport default connect(mapStateToProps, null)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Router } from \"react-router\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport { createHashHistory } from \"history\";\nconst history = createHashHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router history={history}>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}